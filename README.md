# AI Interviewer Platform - Multi-Tenant SaaS

A production-grade, multi-tenant AI Interviewer platform designed for colleges and training institutions. It enables organizations to conduct automated, AI-driven mock interviews for students with voice interaction, real-time transcription, and detailed performance reports.

## ğŸš€ Key Features

*   **Multi-Tenant Architecture**: Single codebase supporting multiple isolated organizations (colleges) via dynamic routing (`/[orgSlug]`).
*   **Role-Based Access Control (RBAC)**:
    *   **Platform Owner**: Global admin managing all organizations and system settings.
    *   **Org Super Admin**: Manages a specific organization, staff, and students.
    *   **Staff/Faculty**: Monitors student progress and reviews reports (Org-scoped).
    *   **Students**: Takes interviews and views their own reports (Org-scoped).
*   **AI Interviewer**:
    *   **Voice-First Interface**: Real-time speech-to-text and text-to-speech.
    *   **Gemini Integration**: Adaptive questioning based on role, resume, and previous answers.
    *   **Live Transcript**: Real-time view of the conversation.
    *   **Context Aware**: Supports job descriptions and experience levels.
*   **Analytics & Reporting**:
    *   Detailed feedback reports generated by AI.
    *   Scoring mechanism (0-100).
    *   Strengths & Weaknesses analysis.
    *   Organization-wide performance dashboards.

## ğŸ›  Tech Stack

*   **Framework**: Next.js 14 (App Router)
*   **Language**: TypeScript
*   **Styling**: Tailwind CSS, shadcn/ui
*   **Backend/DB**: Firebase (Auth, Firestore, Storage)
*   **AI**: Google Gemini API (Multimodal)
*   **State Management**: Zustand
*   **Icons**: Lucide React

## ğŸ“‚ Project Structure

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ [orgSlug]/              # Organization-scoped routes
â”‚   â”‚   â”œâ”€â”€ admin/              # Org Admin Portal
â”‚   â”‚   â”œâ”€â”€ student/            # Student Portal (Dashboard, Room, Report)
â”‚   â”‚   â”œâ”€â”€ login/              # Org-specific Login
â”‚   â”‚   â””â”€â”€ layout.tsx          # Org Context Provider
â”‚   â”œâ”€â”€ admin/                  # Platform Owner Portal (Global)
â”‚   â”œâ”€â”€ api/                    # API Routes
â”‚   â”œâ”€â”€ page.tsx                # Landing Page
â”‚   â””â”€â”€ layout.tsx              # Root Layout & AuthProvider
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ interview/              # Interview Room Components (Timer, Recorder, etc.)
â”‚   â”œâ”€â”€ providers/              # Auth & Theme Providers
â”‚   â””â”€â”€ ui/                     # Reusable UI Components
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ firebase/               # Firebase Config & Firestore Helpers
â”‚   â”œâ”€â”€ gemini/                 # Gemini AI Client & Prompts
â”‚   â””â”€â”€ utils.ts                # Utilities
â””â”€â”€ store/                      # Zustand Stores (Auth, Interview)
```

## ğŸ—º Application Routes

### 1ï¸âƒ£ Public
*   `/`: Landing Page (Overview & entry points).

### 2ï¸âƒ£ Platform Owner (Global Admin)
*   `/admin/login`: Platform Owner Login (Supports Setup Mode with `PLATFORM_SETUP_KEY`).
*   `/admin`: Dashboard (Global stats, recent orgs).
*   `/admin/organizations`: Manage organizations (List, Filter, Suspend).
*   `/admin/organizations/new`: Create new organization.
*   `/admin/audit-logs`: View system-wide audit logs.

### 3ï¸âƒ£ Organization Portal (`/[orgSlug]`)
*   `/[orgSlug]/login`: Unified login for Students and Staff of an organization.

#### Organization Admin
*   `/[orgSlug]/admin`: Org Dashboard (Stats, Quick Actions).
*   `/[orgSlug]/admin/students`: Student Management.
*   `/[orgSlug]/admin/register`: Register individual students or Bulk Upload (Excel).
*   `/[orgSlug]/admin/settings`: Organization settings.

#### Student
*   `/[orgSlug]/student`: Student Dashboard (Progress, History).
*   `/[orgSlug]/student/new-interview`: Configure and start a new session.
*   `/[orgSlug]/student/room/[interviewId]`: **Live Interview Room**.
*   `/[orgSlug]/student/report/[interviewId]`: Detailed Performance Report.

## ğŸš¦ Getting Started

### Prerequisites
1.  Node.js 18+ installed.
2.  Firebase Project created.
3.  Google Gemini API Key enabled.

### Environment Setup
Create a `.env.local` file in the root directory:

```env
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_bucket
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
NEXT_PUBLIC_GEMINI_API_KEY=your_gemini_key
```

### Installation

```bash
npm install
# or
yarn install
```

### Running Locally

```bash
npm run dev
```

Visit `http://localhost:3000` to see the application.

## ğŸ” Security & Session Management

*   **Firestore Rules**: Strict data isolation. Users can only access data belonging to their organization.
*   **Impersonation**: Platform Owners can securely impersonate Org Admins/Students for support, with visual indicators and audit logging.
*   **Secure User Creation**: Uses a secondary isolated authentication instance to create new users without disrupting the administrator's active session.
*   **Session Persistence**:
    *   Sessions persist until explicit logout.
    *   **Auto-Logout**: Security feature that logs out users after 48 hours of inactivity.
    *   **Activity Tracking**: Monitors mouse/keyboard interactions to maintain active session status.
*   **Setup Key**: New Platform Owners can only be created via a secure key (`PLATFORM2024` by default).

## ğŸ§ª Testing Flow

1.  **Create Platform Owner**: Go to `/admin/login`, click "Setup Platform", enter key `PLATFORM2024`.
2.  **Create Organization**: In Admin Dashboard, create "Demo College" (Slug: `demo`).
3.  **Create Org User**: Check "Create Super Admin" during organization creation. 
    *   *Note: This process now verifies the user profile creation and role mapping in real-time.*
4.  **Verify Direct Access**: As Platform Owner, you can visit `/demo/admin` directly without login.
5.  **Login as Org Admin**: Go to `/demo/login` with the new credentials to verify standard access.
6.  **Register Student**: Go to Register tab, add a student.
7.  **Take Interview**: Log out, log in as Student at `/demo/login`. Start Interview.
